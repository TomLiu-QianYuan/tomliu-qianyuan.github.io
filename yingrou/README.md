# AI安慰器（基于DeepSeek）产品规划文档

## 1. 项目概述
开发一个基于DeepSeek API的网页应用，实现以下核心功能：
- 用户输入情绪倾诉内容
- AI分析情绪状态
- 生成个性化安慰回复
- 通过WebSocket保持实时互动

## 2. 技术选型
- **前端**：HTML5 + CSS3 + JavaScript
- **后端**：DeepSeek API (https://api.deepseek.com)
- **开发框架**：无（纯前端实现）
- **部署方式**：静态网页托管

## 3. 文件结构
```bash
ai-comforter/
├── index.html        # 主页面
├── script.js         # 核心逻辑
├── style.css         # 样式表
└── README.md         # 项目文档
```

## 4. 核心功能模块
### 4.1 情绪分析模块
- 实现情感分析算法
- 包含情绪分类器
- 多语言支持（中文/英文）

### 4.2 交互模块
- 实现WebSocket通信
- 实现消息队列处理
- 实现实时消息推送

### 4.3 UI模块
- 添加加载状态指示
- 添加回复展示区域
- 添加输入框/发送按钮

## 5. API集成
- 使用DeepSeek API进行对话生成
- 实现API鉴权（Bearer Token）
- 实现消息体格式化
- 实现错误处理逻辑

## 6. 安全规范
- API密钥存储在服务器端
- 消息加密传输
- 跨域防护
- 请求频率限制

## 7. 未来扩展
- 添加情绪识别模型
- 添加多轮对话功能
- 添加语音输入功能
- 添加情绪日志功能


# AI 舒适器

## 需求总结
1. **功能对接**：对接所有按钮与JavaScript中的功能。
2. **背景音乐**：随机播放背景音乐。
3. **萤火虫效果**：在页面中添加萤火虫效果。
4. **语音识别**：支持语音输入。
5. **历史记录**：保存和加载聊天历史记录。
6. **封印功能**：保存当前对话并开始新的对话。
7. **AI API调用**：调用AI API获取回复。
8. **错误处理**：处理API调用失败的情况。
9. **网络检查**：检查网络连接状态。
10. **用户界面**：确保输入框和输出框没有荧光色的色块。

## 产品设计

### 页面结构
- **输入框**：用户输入消息的地方。
- **发送按钮**：发送用户消息。
- **聊天容器**：显示用户和AI的对话。
- **历史按钮**：显示历史记录面板。
- **历史面板**：加载和显示之前的对话。
- **麦克风按钮**：支持语音输入。
- **封印按钮**：保存当前对话并开始新的对话。

### 功能实现
- **背景音乐**：使用`Audio`对象随机播放背景音乐。
- **萤火虫效果**：使用CSS动画和JavaScript动态创建萤火虫效果。
- **语音识别**：使用`SpeechRecognition` API进行语音输入。
- **历史记录**：使用`localStorage`保存和加载聊天历史记录。
- **封印功能**：将当前对话保存到`localStorage`并开始新的对话。
- **AI API调用**：使用`fetch` API调用AI服务获取回复。
- **错误处理**：在API调用失败时显示友好的错误信息。
- **网络检查**：在发送消息前检查网络连接状态。
- **用户界面**：确保输入框和输出框没有荧光色的色块。
